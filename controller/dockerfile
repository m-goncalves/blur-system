FROM python:3.8-slim

LABEL version="0.0.1"

RUN apt-get update && apt-get install -y \
    cmake \
    g++ 
    
COPY requirements.txt .

RUN pip install --upgrade pip \
    && pip install -r requirements.txt 

# && useradd worker \
    # && mkdir -p /source-images /blurred-images /home/worker/webservice \
    # && chown -R worker /home/worker /source-images /blurred-images

# RUN chmod u+rwx /blurred-images
# USER worker

WORKDIR /app

COPY . .

ENTRYPOINT python worker.py

VOLUME ["/source-images", "/blurred-images"]